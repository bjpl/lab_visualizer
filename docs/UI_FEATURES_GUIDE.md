# Interactive Features UI Guide

## Where to Find Everything

When you navigate to `/viewer` (or `/viewer?pdb=1CRN`), you'll now see:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Toolbar (Top)                                      [Collaborate]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚  SIDEBAR (Right - 30%)               â”‚
â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                          â”‚  â”‚ Interactive Features           â”‚  â”‚
â”‚                          â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   3D VIEWER              â”‚  â”‚ [Show/Hide H-Bonds]           â”‚  â”‚
â”‚   (Left - 70%)           â”‚  â”‚ [Show/Hide Measurements]      â”‚  â”‚
â”‚                          â”‚  â”‚ [Show/Hide Sequence]          â”‚  â”‚
â”‚   â€¢ Hover for tooltips   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â€¢ Click atoms          â”‚                                      â”‚
â”‚   â€¢ Rotate/zoom          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                          â”‚  â”‚ Controls                       â”‚  â”‚
â”‚                          â”‚  â”‚ - Representation               â”‚  â”‚
â”‚                          â”‚  â”‚ - Color Scheme                 â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ - Quality                     â”‚  â”‚
â”‚   â”‚ Measurements     â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”‚ Panel (Overlay)  â”‚   â”‚                                      â”‚
â”‚   â”‚ â€¢ Distance       â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ â€¢ Angle          â”‚   â”‚  â”‚ Selection                      â”‚  â”‚
â”‚   â”‚ â€¢ History        â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                      â”‚
â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ Info                          â”‚  â”‚
â”‚   â”‚ Hover Tooltip    â”‚   â”‚  â”‚ - PDB Details                 â”‚  â”‚
â”‚   â”‚ Chain: A         â”‚   â”‚  â”‚ - Statistics                  â”‚  â”‚
â”‚   â”‚ Residue: ALA 10  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”‚ Atom: CA         â”‚   â”‚                                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                      â”‚
â”‚                          â”‚                                      â”‚
â”‚        [Fullscreen]      â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SEQUENCE VIEWER (Bottom - 256px height)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [<] Chain A [>]                              [Search]   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  [A][L][G][K][R][D][E][V][I][P][S][T][Y][F]...         â”‚   â”‚
â”‚  â”‚   1  2  3  4  5  6  7  8  9 10 11 12 13 14             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Legend: ğŸŸ¢ Hydrophobic  ğŸ”µ Polar  ğŸ”´ Charged          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## How to Use Each Feature

### 1. **Hover Tooltip** (Always Active)
- **Location:** Bottom-right corner of 3D viewer
- **What it does:** Shows info when you hover over atoms
- **Info displayed:**
  - Chain ID
  - Residue name and number
  - Atom name and element
  - 3D coordinates

### 2. **Hydrogen Bonds Toggle**
- **Location:** Sidebar > Interactive Features > First button
- **What it does:** Shows/hides yellow hydrogen bonds
- **States:**
  - OFF: "Show H-Bonds" (outline button)
  - ON: "Hide H-Bonds" (filled button, shows "Hydrogen bonds shown in yellow")

### 3. **Measurements**
- **Location:** Sidebar > Interactive Features > Second button
- **What it does:** Opens measurement panel overlay
- **Panel location:** Top-right of 3D viewer
- **Features:**
  - Create distance measurements (2 atoms)
  - Create angle measurements (3 atoms)
  - View measurement history
  - Delete individual measurements
  - Clear all measurements
  - Toggle measurement visibility

**How to measure:**
1. Click "Show Measurements" button
2. In measurements panel, click "Distance" or "Angle"
3. Click atoms in 3D viewer (2 for distance, 3 for angle)
4. Measurement auto-completes and shows in history

### 4. **Sequence Viewer**
- **Location:** Bottom panel (256px height)
- **Toggle:** Sidebar > Interactive Features > Third button
- **Features:**
  - Switch between chains using [<] [>] arrows
  - Search residues by name or number
  - Color-coded residues:
    - ğŸŸ¢ Green: Hydrophobic (ALA, VAL, ILE, LEU, MET, PHE, TRP, PRO)
    - ğŸ”µ Blue: Polar (SER, THR, CYS, TYR, ASN, GLN)
    - ğŸ”´ Red: Charged (ASP, GLU, LYS, ARG, HIS)
  - Click any residue to select it in 3D
  - Auto-scroll to hovered residue
  - Selected residues show green highlight

**How to use:**
1. Click any residue button
2. Residue is selected in 3D with green tint
3. Hovering in 3D highlights in sequence
4. Use search to filter residues

## Quick Actions

| Action | How To |
|--------|--------|
| See atom info | Hover over atom in 3D |
| Measure distance | Measurements panel > Distance > Click 2 atoms |
| Measure angle | Measurements panel > Angle > Click 3 atoms |
| Show H-bonds | Click "Show H-Bonds" button |
| Select residue | Click residue in sequence viewer |
| Search residue | Type in sequence viewer search box |
| Switch chains | Use [<] [>] arrows in sequence viewer |
| Hide sequence | Click "Hide Sequence" button |

## Visual Indicators

- **Green highlight** = Selected atom/residue
- **Yellow lines** = Hydrogen bonds
- **White text overlay** = Measurement values (when implemented)
- **Blue ring** = Hovered residue in sequence
- **Green ring** = Selected residue in sequence

## Keyboard Shortcuts (Existing)

- `R` - Reset camera
- `F` - Focus selection
- `Ctrl+F` - Fullscreen
- `S` - Selection mode
- `H` - Help
- `Esc` - Clear selection
- `+/-` - Zoom in/out

## Tips

1. **Hover tooltip is always visible** - no need to enable it
2. **Measurements persist** - they stay until you delete them
3. **Sequence syncs automatically** - hover in 3D, see in sequence
4. **Green tint confirms selection** - look for green glow on selected atoms
5. **Panels can be hidden** - use toggle buttons to show/hide features

## Troubleshooting

**"I don't see the interactive features"**
- Check you're on the `/viewer` page
- Look for "Interactive Features" section in right sidebar
- Make sure you have a structure loaded (`/viewer?pdb=1CRN`)

**"Sequence viewer is empty"**
- Wait for structure to finish loading
- Check that structure has loaded successfully
- Look for "No structure loaded" message

**"Measurements aren't working"**
- Click "Show Measurements" button first
- Click "Distance" or "Angle" in measurements panel
- Then click atoms in 3D viewer
- Make sure structure is loaded

**"Hover tooltip not showing"**
- Hover directly over atoms (not empty space)
- Wait for structure to load completely
- Check browser console for errors

---

**Last Updated:** 2025-11-24
**Status:** âœ… All features active and integrated
